
import streamlit as st
from db import verify_user

st.set_page_config(page_title="ç™»å…¥ç³»çµ±", layout="centered")

if "logged_in" not in st.session_state:
    st.session_state.logged_in = False
    st.session_state.username = ""

def login():
    st.title("ğŸ” çˆ†ç¥é æ¸¬ç™»å…¥")
    username = st.text_input("å¸³è™Ÿ")
    password = st.text_input("å¯†ç¢¼", type="password")
    if st.button("ç™»å…¥"):
        if verify_user(username, password):
            st.success("ç™»å…¥æˆåŠŸ")
            st.session_state.logged_in = True
            st.session_state.username = username
        else:
            st.error("ç™»å…¥å¤±æ•—ï¼Œå¸³è™Ÿæˆ–å¯†ç¢¼éŒ¯èª¤")

def main_page():
    st.title("ğŸ´ ç™¾å®¶æ¨‚é æ¸¬ç³»çµ±")
    st.write(f"ğŸ‘‹ æ­¡è¿ï¼Œ{st.session_state.username}ï¼")
    st.success("é€™æ˜¯æ‚¨ç™»å…¥å¾Œæ‰èƒ½çœ‹åˆ°çš„å…§å®¹ã€‚")
    st.markdown("ï¼ˆé€™è£¡å¯ä»¥åµŒå…¥ç™¾å®¶æ¨‚é æ¸¬ã€ç­–ç•¥æ¨¡æ“¬ã€åœ–è¡¨é¡¯ç¤ºç­‰åŠŸèƒ½ï¼‰")
    if st.button("ç™»å‡º"):
        st.session_state.logged_in = False
        st.session_state.username = ""

if st.session_state.logged_in:
    main_page()
else:
    login()
